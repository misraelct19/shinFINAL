<!-- perfil.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perfil del Estudiante - SHIN</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .perfil {
      max-width: 700px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .avatar-grande {
      font-size: 4rem;
    }
    .logros, .nombramientos {
      margin-top: 30px;
    }
    .logro, .nombramiento {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      background: #f9f9f9;
      padding: 10px;
      border-radius: 10px;
    }
    .logro img {
      width: 50px;
      height: 50px;
      margin-right: 15px;
    }
    .volver {
      margin-top: 30px;
    }
    .btn-logros {
      background-color: #007BFF;
      color: white;
      border: none;
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 20px;
    }
    .btn-logros:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <div class="perfil">
    <h2 id="nombre">Nombre del estudiante</h2>
    <div><span id="avatar" class="avatar-grande">ðŸ™‚</span></div>
    <p><strong>Grado:</strong> <span id="grado"></span></p>
    <p><strong>Aikipoints:</strong> <span id="puntos">0</span></p>

    <div class="logros">
      <h3>ðŸŽ– Logros obtenidos</h3>
      <div id="lista-logros"></div>
    </div>

    <div class="nombramientos">
      <h3>ðŸ‘‘ Nombramientos del Mes</h3>
      <div id="lista-nombramientos"></div>
    </div>

    <div style="text-align: center;">
      <button onclick="window.location.href='logros.html'" class="btn-logros">
        ðŸ“˜ Ver todos los logros disponibles
      </button>
    </div>

    <div class="volver">
      <button onclick="window.location.href='index.html'">â¬… Volver al leaderboard</button>
    </div>
  </div>

<script>
  const logrosDef = [
    { nombre: "No faltar a ninguna clase en el mes", tipo: "RECURRENTE", puntos: 25 },
    { nombre: "cada tÃ©cnica aprendida en omote y ura", tipo: "UNICO", puntos: 5 },
    { nombre: "aprendio los numeros del 1 al 10 en japones", tipo: "UNICO", puntos: 10 },
    { nombre: "se puede colocar el cinturÃ³n solo(a)", tipo: "UNICO", puntos: 10 },
    { nombre: "shikko adelante, atrÃ¡s y con giro", tipo: "UNICO", puntos: 10 },
    { nombre: "aprendio tobu ukemi", tipo: "UNICO", puntos: 20 },
    { nombre: "aprendio todos los agarres", tipo: "UNICO", puntos: 20 },
    { nombre: "completÃ³ su primer seminario", tipo: "UNICO", puntos: 10 },
    { nombre: "asistencia a 5 seminarios", tipo: "UNICO", puntos: 20 },
    { nombre: "asistencia a 10 seminarios", tipo: "UNICO", puntos: 50 },
    { nombre: "asistencia a 20 seminarios", tipo: "UNICO", puntos: 100 },
    { nombre: "participÃ³ en su primera exhibiciÃ³n", tipo: "UNICO", puntos: 10 },
    { nombre: "participÃ³ en 5 exhibiciones", tipo: "UNICO", puntos: 50 },
    { nombre: "participÃ³ en 10 exhibiciones", tipo: "UNICO", puntos: 100 },
    { nombre: "participÃ³ en 20 exhibiciones", tipo: "UNICO", puntos: 200 },
    { nombre: "aprendiÃ³ 20 suburis de jo", tipo: "UNICO", puntos: 50 },
    { nombre: "aprendiÃ³ 7 suburi de boken", tipo: "UNICO", puntos: 20 },
    { nombre: "aprendiÃ³ 3 katas de jo", tipo: "UNICO", puntos: 50 },
    { nombre: "invitÃ³ un amigo o familiar a clases de Aikido", tipo: "RECURRENTE", puntos: 5 },
    { nombre: "alcanzo 8vo kyu", tipo: "UNICO", puntos: 10 },
    { nombre: "alcanzo 7mo kyu", tipo: "UNICO", puntos: 20 },
    { nombre: "alcanzo 6to kyu", tipo: "UNICO", puntos: 40 },
    { nombre: "alcanzo 5to kyu", tipo: "UNICO", puntos: 80 },
    { nombre: "alcanzo 4to kyu", tipo: "UNICO", puntos: 160 },
    { nombre: "alcanzo 3er kyu", tipo: "UNICO", puntos: 320 },
    { nombre: "1 aÃ±o de antigÃ¼edad en el dojo", tipo: "UNICO", puntos: 50 },
    { nombre: "2 aÃ±os de antigÃ¼edad en el dojo", tipo: "UNICO", puntos: 100 },
    { nombre: "3 aÃ±os de antigÃ¼edad en el dojo", tipo: "UNICO", puntos: 150 },
    { nombre: "5 aÃ±os de antigÃ¼edad en el dojo", tipo: "UNICO", puntos: 200 },
    { nombre: "fue ponente en un seminario", tipo: "UNICO", puntos: 60 },
    { nombre: "apoyÃ³ como uke en examen por primera vez", tipo: "UNICO", puntos: 10 },
    { nombre: "apoyÃ³ como uke en examen 5 veces", tipo: "UNICO", puntos: 50 },
    { nombre: "apoyÃ³ como uke en examen 10 veces", tipo: "UNICO", puntos: 100 },
    { nombre: "apoyÃ³ como uke en examen 20 veces", tipo: "UNICO", puntos: 200 },
    { nombre: "cada exhibicion", tipo: "RECURRENTE", puntos: 10 },
    { nombre: "cada seminario", tipo: "RECURRENTE", puntos: 10 },
    { nombre: "cada examen", tipo: "RECURRENTE", puntos: 10 },
    { nombre: "cada apoyo como uke en examen", tipo: "RECURRENTE", puntos: 10 }
  ];

  const params = new URLSearchParams(window.location.search);
  const nombre = params.get("nombre");
  const jugador = jugadores.find(j => j.nombre === nombre);

  if (jugador) {
    // ðŸ’¡ CÃ¡lculo dinÃ¡mico de puntos
    jugador.puntos = jugador.logros.reduce((total, logro) => {
      const def = logrosDef.find(l => l.nombre === logro.nombre);
      if (!def) return total;
      const veces = (def.tipo === "RECURRENTE" && logro.cantidad) ? logro.cantidad : 1;
      return total + (def.puntos * veces);
    }, 0);

    document.getElementById("nombre").textContent = jugador.nombre;
    document.getElementById("grado").textContent = jugador.grado;
    document.getElementById("avatar").textContent = jugador.avatar;
    document.getElementById("puntos").textContent = jugador.puntos;

    const contLogros = document.getElementById("lista-logros");
    jugador.logros.forEach(logro => {
      const div = document.createElement("div");
      div.className = "logro";
      div.innerHTML = `
        <img src="${logro.imagen}" alt="insignia" />
        <div>
          <strong>${logro.nombre}</strong><br>
          Fecha: ${logro.fecha}<br>
          ${logro.tipo === 'RECURRENTE' ? `Cantidad: ${logro.cantidad}` : ''}
        </div>
      `;
      contLogros.appendChild(div);
    });

    const contNombramientos = document.getElementById("lista-nombramientos");
    jugador.nombramientos.forEach(n => {
      const div = document.createElement("div");
      div.className = "nombramiento";
      div.innerHTML = `<strong>${n.titulo}</strong> â€“ ${n.fecha}`;
      contNombramientos.appendChild(div);
    });
  } else {
    document.querySelector(".perfil").innerHTML = "<p>Estudiante no encontrado.</p>";
  }
</script>
